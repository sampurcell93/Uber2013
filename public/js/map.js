// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    return window.MovieMap = Backbone.View.extend({
      initialize: function() {
        this.infowindow = new google.maps.InfoWindow();
        this.mapOptions = {
          center: new google.maps.LatLng(37.7849300, -122.4294200),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        this.map = new google.maps.Map(document.getElementsByClassName("map-canvas")[0], this.mapOptions);
        _.bindAll(this, "render");
        this.render();
        return this;
      },
      render: function() {
        var self;
        self = this;
        return _.each(this.collection.models, function(movie) {
          return _.each(movie.get("coords").models, function(location) {
            var marker;
            marker = new MovieMarker({
              model: location,
              mapObj: self
            }).render();
            self.collection.markers.push(marker);
            marker.setMap(self.map);
            return google.maps.event.addListener(marker, "click", function() {
              self.infowindow.setContent(location.get("title"));
              return self.infowindow.open(self.map, this);
            });
          });
        });
      }
    });
  });

}).call(this);
